import{f as L,H as ee,j as e,G as g,T as p,L as H,D as q,a as x,E as W,b as V,r as oe,n as Se,m as $e,C as G,S as A,c as u,N as ce,P as be,B as D,d as K,e as de,I as ue,g as U,F as f,h as $,i as z,u as le,k as he,l as ge,o as pe,p as xe,q as je,s as Ne,t as Oe,v as ve,w as te,x as re,y as se,z as ie,A as Ce,J as we,K as Je,M as Ee,R as F,O as Ie,Q as Te}from"./vendor-dbd6f3e0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const b="https://api.staging.highrewardsapp.com/api",N=(r,t={})=>{t.headers||(t.headers=new Headers({Accept:"application/json","Content-Type":"application/json"}));const s=JSON.parse(localStorage.getItem("user")||"{}");if(s){const{accessToken:n}=s;t.headers instanceof Headers&&t.headers.set("Authorization",`Bearer ${n}`)}else alert("No valid access token found.");return L(r,t)},O={getList:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c=`${b}/category?page=${s}&perPage=${n}&sort=${o}:${a}`;return N(c).then(({json:i})=>i)},getOne:(r,t)=>{const s=`${b}/category/${t.id}`;return N(s).then(({json:n})=>({data:{...n,id:n.id}}))},getMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${b}/category/search?id=${JSON.stringify(s)}`;return N(n).then(({json:o})=>({data:o}))},getManyReference:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c={...t.filter,[t.target]:t.id,sort:JSON.stringify([o,a]),range:JSON.stringify([(s-1)*n,s*n-1])},i=`${b}/category?${JSON.stringify(c)}`;return N(i).then(({headers:d,json:l})=>{var h;const j=((h=d.get("content-range"))==null?void 0:h.split("/").pop())||"";return{data:l,total:parseInt(j,10)}})},create:(r,t)=>{const{...s}=t.data||{},n={...s},o=`${b}/category`;return N(o,{method:"POST",body:JSON.stringify(n)}).then(({json:a})=>({data:{...n,id:a.id}})).catch(a=>(console.error("Error during entity creation:",a),Promise.reject(a)))},update:(r,t)=>{const{id:s,name:n}=t.data||{},o={name:n};return N(`${b}/${r}/${s}`,{method:"PATCH",body:JSON.stringify(o)}).then(({json:a})=>({data:{...o,id:a.id}}))},updateMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${b}/${r}?${JSON.stringify(s)}`;return N(n,{method:"PUT",body:JSON.stringify(t.data)}).then(({json:o})=>({data:o}))},delete:(r,t)=>N(`${b}/${r}/${t.id}`,{method:"DELETE"}).then(({json:s})=>({data:s})),deleteMany:(r,t)=>{const{ids:s}=t,n=`${b}/${r}/deleteMany`;return N(n,{method:"DELETE",body:JSON.stringify({ids:s})}).then(()=>({data:s}))}},v="https://api.staging.highrewardsapp.com/api",C=(r,t={})=>{t.headers||(t.headers=new Headers({Accept:"application/json","Content-Type":"application/json"}));const s=JSON.parse(localStorage.getItem("user")||"{}");if(s){const{accessToken:n}=s;t.headers instanceof Headers&&t.headers.set("Authorization",`Bearer ${n}`)}else alert("No valid access token found.");return L(r,t)},B={getList:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c=`${v}/ocr_scan?page=${s}&perPage=${n}&sort=${o}:${a}`;return C(c).then(({json:i})=>i)},getOne:(r,t)=>{const s=`${v}/ocr_scan/${t.id}`;return C(s).then(({json:n})=>({data:{...n,id:n.id}}))},getMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${v}/ocr_scan/search?id=${JSON.stringify(s)}`;return C(n).then(({json:o})=>({data:o}))},getManyReference:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c={...t.filter,[t.target]:t.id,sort:JSON.stringify([o,a]),range:JSON.stringify([(s-1)*n,s*n-1])},i=`${v}/ocr_scan?${JSON.stringify(c)}`;return C(i).then(({headers:d,json:l})=>{var h;const j=((h=d.get("content-range"))==null?void 0:h.split("/").pop())||"";return{data:l,total:parseInt(j,10)}})},create:(r,t)=>{const{...s}=t.data||{},n={...s},o=`${v}/ocr_scan`;return C(o,{method:"POST",body:JSON.stringify(n)}).then(({json:a})=>({data:{...n,id:a.id}})).catch(a=>(console.error("Error during entity creation:",a),Promise.reject(a)))},update:(r,t)=>{const{id:s,status:n}=t.data||{},o={status:n};return C(`${v}/${r}/${s}/update-status-and-award-points`,{method:"PATCH",body:JSON.stringify(o)}).then(({json:a})=>({data:{...o,id:a.id}}))},updateMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${v}/${r}?${JSON.stringify(s)}`;return C(n,{method:"PUT",body:JSON.stringify(t.data)}).then(({json:o})=>({data:o}))},delete:(r,t)=>C(`${v}/${r}/${t.id}`,{method:"DELETE"}).then(({json:s})=>({data:s})),deleteMany:(r,t)=>{const{ids:s}=t,n=`${v}/${r}/deleteMany`;return C(n,{method:"DELETE",body:JSON.stringify({ids:s})}).then(()=>({data:s}))}},P="https://api.staging.highrewardsapp.com/api",S=(r,t={})=>{t.headers||(t.headers=new Headers({Accept:"application/json","Content-Type":"application/json"}));const s=JSON.parse(localStorage.getItem("user")||"{}");if(s){const{accessToken:n}=s;t.headers instanceof Headers&&t.headers.set("Authorization",`Bearer ${n}`)}else alert("No valid access token found.");return L(r,t)},w={getList:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"};if(r==="product")if(window.location.search.includes("storeId")){const c=window.location.search.split("=")[1],i=`${P}/product/get-store-products?page=${s}&perPage=${n}&sort=${o}:${a}&storeId=${c}`;return S(i).then(({json:d})=>d)}else{const c=`${P}/product?page=${s}&perPage=${n}&sort=${o}:${a}`;return S(c).then(({json:i})=>i)}return Promise.reject(`Unsupported resource: ${r}`)},getOne:(r,t)=>{const s=`${P}/product/${t.id}`;return S(s).then(({json:n})=>({data:{...n,id:n.id}}))},getMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${P}/product/search?id=${JSON.stringify(s)}`;return S(n).then(({json:o})=>({data:o}))},getManyReference:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c={...t.filter,[t.target]:t.id,sort:JSON.stringify([o,a]),range:JSON.stringify([(s-1)*n,s*n-1])};t.id!==void 0&&(c.store=t.id);const i=`${P}/product/store/${t.id}?${JSON.stringify(c)}`;return S(i).then(({headers:d,json:l})=>{var h;const j=((h=d.get("content-range"))==null?void 0:h.split("/").pop())||"";return{data:l,total:parseInt(j,10)}})},create:(r,t)=>{const{productReceiptPoints:s,...n}=t.data||{},o={...n,productReceiptPoints:s?Number(s):void 0},a=`${P}/product`;return S(a,{method:"POST",body:JSON.stringify(o)}).then(({json:c})=>({data:{...o,id:c.id}})).catch(c=>(console.error("Error during entity creation:",c),Promise.reject(c)))},update:(r,t)=>{const{id:s,title:n,description:o,productReceiptPoints:a,category:c,store:i}=t.data||{},d={title:n,description:o,productReceiptPoints:a!==void 0?Number(a):void 0,category:c,store:i};return S(`${P}/${r}/${s}`,{method:"PATCH",body:JSON.stringify(d)}).then(({json:l})=>({data:{...d,id:l.id}}))},updateMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${P}/${r}?${JSON.stringify(s)}`;return S(n,{method:"PUT",body:JSON.stringify(t.data)}).then(({json:o})=>({data:o}))},delete:(r,t)=>S(`${P}/${r}/${t.id}`,{method:"DELETE"}).then(({json:s})=>({data:s})),deleteMany:(r,t)=>{const{ids:s}=t,n=`${P}/${r}/deleteMany`;return S(n,{method:"DELETE",body:JSON.stringify({ids:s})}).then(()=>({data:s}))}},m="https://api.staging.highrewardsapp.com/api",y=(r,t={})=>{t.headers||(t.headers=new Headers({Accept:"application/json","Content-Type":"application/json"}));const s=JSON.parse(localStorage.getItem("user")||"{}");if(s){const{accessToken:n}=s;t.headers instanceof Headers&&t.headers.set("Authorization",`Bearer ${n}`)}else alert("No valid access token found.");return L(r,t)},J={getList:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c=`${m}/store?page=${s}&perPage=${n}&sort=${o}:${a}`;return y(c).then(({json:i})=>i)},getOne:(r,t)=>{const s=`${m}/store/${t.id}`;return y(s).then(({json:n})=>({data:{...n,id:n.id}}))},getMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${m}/store/search?id=${JSON.stringify(s)}`;return y(n).then(({json:o})=>({data:o}))},getManyReference:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c={...t.filter,[t.target]:t.id,sort:JSON.stringify([o,a]),range:JSON.stringify([(s-1)*n,s*n-1])},i=`${m}/store?${JSON.stringify(c)}`;return y(i).then(({headers:d,json:l})=>{var h;const j=((h=d.get("content-range"))==null?void 0:h.split("/").pop())||"";return{data:l,total:parseInt(j,10)}})},create:(r,t)=>{const{storePhoto:s,storeCheckInPoints:n,storeReceiptPoints:o,latitude:a,longitude:c,...i}=t.data||{},d={...i,storePhoto:s,storeCheckInPoints:n?Number(n):void 0,storeReceiptPoints:o?Number(o):void 0,latitude:a?Number(a):void 0,longitude:c?Number(c):void 0},l=`${m}/store`,j=s&&s.rawFile;if(j instanceof File){const h=new FormData;return h.append("file",j),h.append("type",j.type),y(`${m}/upload`,{body:h,method:"POST",headers:new Headers({})}).then(R=>y(l,{method:"POST",body:JSON.stringify({...d,storePhoto:R.body})})).then(({json:R})=>({data:{...d,id:R.id}}))}else return y(l,{method:"POST",body:JSON.stringify(d)}).then(({json:h})=>({data:{...d,id:h.id}})).catch(h=>(console.error("Error during entity creation:",h),Promise.reject(h)))},update:(r,t)=>{const{id:s,address:n,foursquareId:o,name:a,latitude:c,longitude:i,postCode:d,region:l,timezone:j,storeCheckInPoints:h,storeReceiptPoints:R,inStorePartner:Q,storePhoto:M,user:X,formatted_address:fe,cross_street:ye,country:me,locality:Pe}=t.data||{},_={storePhoto:M,storeCheckInPoints:h!==void 0?Number(h):void 0,storeReceiptPoints:R!==void 0?Number(R):void 0,inStorePartner:Q,address:n,name:a,foursquareId:o,latitude:c?Number(c):void 0,longitude:i?Number(i):void 0,postCode:d,region:l,timezone:j,formatted_address:fe,cross_street:ye,country:me,locality:Pe,user:X},Y=M&&M.rawFile;if(Y instanceof File){const k=new FormData;return k.append("file",Y),k.append("type",Y.type),y(`${m}/upload`,{body:k,method:"POST",headers:new Headers({})}).then(Z=>y(`${m}/${r}/${s}`,{method:"PATCH",body:JSON.stringify({..._,storePhoto:Z.body})})).then(({json:Z})=>({data:{..._,id:Z.id}}))}else return y(`${m}/${r}/${s}`,{method:"PATCH",body:JSON.stringify(_),headers:new Headers({"Content-Type":"application/json"})}).then(({json:k})=>({data:{..._,id:k.id}}))},updateMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${m}/${r}?${JSON.stringify(s)}`;return y(n,{method:"PUT",body:JSON.stringify(t.data)}).then(({json:o})=>({data:o}))},delete:(r,t)=>y(`${m}/${r}/${t.id}`,{method:"DELETE"}).then(({json:s})=>({data:s})),deleteMany:(r,t)=>{const{ids:s}=t,n=`${m}/${r}/deleteMany`;return y(n,{method:"DELETE",body:JSON.stringify({ids:s})}).then(()=>({data:s}))}},E="https://api.staging.highrewardsapp.com/api",I=(r,t={})=>{t.headers||(t.headers=new Headers({Accept:"application/json","Content-Type":"application/json"}));const s=JSON.parse(localStorage.getItem("user")||"{}");if(s){const{accessToken:n}=s;t.headers instanceof Headers&&t.headers.set("Authorization",`Bearer ${n}`)}else alert("No valid access token found.");return L(r,t)},T={getList:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c=`${E}/user?page=${s}&perPage=${n}&sort=${o}:${a}`;return I(c).then(({json:i})=>i)},getOne:(r,t)=>{const s=`${E}/user/search?id=${t.id}`;return I(s).then(({json:n})=>({data:{...n,id:n.id}}))},getMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${E}/user/search?id=${JSON.stringify(s)}`;return I(n).then(({json:o})=>({data:o}))},getManyReference:(r,t)=>{const{page:s,perPage:n}=t.pagination,{field:o,order:a}=t.sort||{field:"id",order:"ASC"},c={...t.filter,[t.target]:t.id,sort:JSON.stringify([o,a]),range:JSON.stringify([(s-1)*n,s*n-1])},i=`${E}/user?${JSON.stringify(c)}`;return I(i).then(({headers:d,json:l})=>{var h;const j=((h=d.get("content-range"))==null?void 0:h.split("/").pop())||"";return{data:l,total:parseInt(j,10)}})},create:(r,t)=>{const{...s}=t.data||{},n={...s},o=`${E}/user/create`;return I(o,{method:"POST",body:JSON.stringify(n)}).then(({json:a})=>({data:{...n,id:a.id}})).catch(a=>(console.error("Error during entity creation:",a),Promise.reject(a)))},update:(r,t)=>{const{id:s,firstName:n,lastName:o,email:a,city:c,state:i,address:d,phoneNumber:l,currentPoints:j,isActive:h,isAdmin:R,user:Q}=t.data||{},M={firstName:n,lastName:o,email:a,city:c,state:i,address:d,phoneNumber:l,currentPoints:Number(j),isActive:h,isAdmin:R,user:Q};return I(`${E}/${r}/${s}`,{method:"PATCH",body:JSON.stringify(M)}).then(({json:X})=>({data:{...M,id:X.id}}))},updateMany:(r,t)=>{const s={filter:JSON.stringify({id:t.ids})},n=`${E}/${r}?${JSON.stringify(s)}`;return I(n,{method:"PUT",body:JSON.stringify(t.data)}).then(({json:o})=>({data:o}))},delete:(r,t)=>I(`${E}/${r}/${t.id}`,{method:"DELETE"}).then(({json:s})=>({data:s})),deleteMany:(r,t)=>{const{ids:s}=t,n=`${E}/${r}/deleteMany`;return I(n,{method:"DELETE",body:JSON.stringify({ids:s})}).then(()=>({data:s}))}},ne={getList:(r,t)=>{switch(r){case"user":return T.getList(r,t);case"store":return J.getList(r,t);case"product":return w.getList(r,t);case"category":return O.getList(r,t);case"ocr_scan":return B.getList(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}},getOne:(r,t)=>{switch(r){case"user":return T.getOne(r,t);case"store":return J.getOne(r,t);case"product":return w.getOne(r,t);case"category":return O.getOne(r,t);case"ocr_scan":return B.getOne(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}},getMany:(r,t)=>{switch(r){case"user":return T.getMany(r,t);case"store":return J.getMany(r,t);case"product":return w.getMany(r,t);case"category":return O.getMany(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}},getManyReference:(r,t)=>{switch(r){case"user":return T.getManyReference(r,t);case"store":return J.getManyReference(r,t);case"product":return w.getManyReference(r,t);case"category":return O.getManyReference(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}},create:(r,t)=>{switch(r){case"user":return T.create(r,t);case"store":return J.create(r,t);case"product":return w.create(r,t);case"category":return O.create(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}},update:(r,t)=>{switch(r){case"user":return T.update(r,t);case"store":return J.update(r,t);case"product":return w.update(r,t);case"category":return O.update(r,t);case"ocr_scan":return B.update(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}},updateMany:(r,t)=>{switch(r){case"user":return T.updateMany(r,t);case"store":return J.updateMany(r,t);case"product":return w.updateMany(r,t);case"category":return O.updateMany(r,t);case"ocr_scan":return B.updateMany(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}},delete:(r,t)=>{switch(r){case"user":return T.delete(r,t);case"store":return J.delete(r,t);case"product":return w.delete(r,t);case"category":return O.delete(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}},deleteMany:(r,t)=>{switch(r){case"user":return T.deleteMany(r,t);case"store":return J.deleteMany(r,t);case"product":return w.deleteMany(r,t);case"category":return O.deleteMany(r,t);default:return Promise.reject(`Unsupported resource: ${r}`)}}},Re="https://api.staging.highrewardsapp.com/api",Ae={login:({username:r,password:t})=>L(`${Re}/auth/signin`,{method:"POST",body:JSON.stringify({email:r,password:t})}).then(({json:s})=>{const{userToken:n}=s;if(n&&n.accessToken){const{accessToken:o}=n;return localStorage.setItem("user",JSON.stringify({accessToken:o})),Promise.resolve()}else return Promise.reject(new ee("Invalid Response",500,"Token is missing or undefined."))}).catch(s=>s.status===401?Promise.reject(new ee("Unauthorized",401,"Invalid username or password")):Promise.reject(new ee("Error",s.status,s.body))),logout:()=>(localStorage.removeItem("user"),Promise.resolve()),checkError:()=>Promise.resolve(),checkAuth:()=>localStorage.getItem("user")?Promise.resolve():Promise.reject(),getPermissions:()=>Promise.resolve(void 0),getIdentity:()=>{const r=localStorage.getItem("user"),t=r?JSON.parse(r):null;return Promise.resolve(t)}};function Me(r){return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Users"})}),e.jsx(H,{...r,children:e.jsxs(q,{children:[e.jsx(x,{source:"firstName"}),e.jsx(x,{source:"lastName"}),e.jsx(x,{source:"email"}),e.jsx(x,{source:"city"}),e.jsx(x,{source:"state"}),e.jsx(x,{source:"address"}),e.jsx(x,{source:"phoneNumber"}),e.jsx(x,{source:"currentPoints"}),e.jsx(W,{basePath:"/user"}),e.jsx(V,{basePath:"/user"})]})})]})}const De=[oe()],Le=[oe(),Se(),$e(0)];function ke(r){return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Create User"})}),e.jsx(G,{title:"create a post",...r,children:e.jsxs(A,{children:[e.jsx(u,{source:"firstName"}),e.jsx(u,{source:"lastName"}),e.jsx(u,{source:"email",validate:oe(De)}),e.jsx(ce,{source:"currentPoints"}),e.jsx(u,{source:"city"}),e.jsx(u,{source:"state"}),e.jsx(u,{source:"address"}),e.jsx(u,{source:"firebaseId",validate:Le}),e.jsx(u,{source:"phoneNumber"}),e.jsx(be,{source:"password",sx:{width:"17.5%"}}),e.jsx(D,{label:"isAdmin",source:"isAdmin"}),e.jsx(D,{label:"isActive",source:"isActive"})]})})]})}const Fe=r=>e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Edit User"})}),e.jsx(K,{...r,children:e.jsxs(A,{children:[e.jsx(u,{disabled:!0,source:"id"}),e.jsx(u,{source:"firstName"}),e.jsx(u,{source:"lastName"}),e.jsx(u,{source:"email"}),e.jsx(ce,{source:"currentPoints"}),e.jsx(u,{source:"city"}),e.jsx(u,{source:"state"}),e.jsx(u,{source:"address"}),e.jsx(u,{source:"firebaseId"}),e.jsx(u,{source:"phoneNumber"}),e.jsx(D,{label:"isAdmin",source:"isAdmin"}),e.jsx(D,{label:"isActive",source:"isActive"})]})})]});function Ue(r){return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Stores"})}),e.jsx(H,{...r,children:e.jsxs(q,{children:[e.jsx(x,{source:"name"}),e.jsx(x,{source:"region"}),e.jsx(x,{source:"postCode"}),e.jsx(x,{source:"timezone"}),e.jsx(x,{source:"storeCheckInPoints"}),e.jsx(x,{source:"storeReceiptPoints"}),e.jsx(de,{basePath:"/store"}),e.jsx(W,{basePath:"/store"}),e.jsx(V,{basePath:"/store"})]})})]})}function He(r){return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Create Store"})}),e.jsx(G,{title:"create a post",...r,children:e.jsxs(A,{children:[e.jsx(u,{source:"foursquareId"}),e.jsx(u,{source:"name"}),e.jsx(u,{source:"address"}),e.jsx(u,{source:"region"}),e.jsx(u,{source:"postCode"}),e.jsx(u,{source:"timezone"}),e.jsx(u,{source:"latitude"}),e.jsx(u,{source:"longitude"}),e.jsx(u,{source:"storeCheckInPoints"}),e.jsx(u,{source:"storeReceiptPoints"}),e.jsx(D,{label:"inStorePartner",source:"inStorePartner"}),e.jsx(ue,{source:"storePhoto",label:"Store Photo",children:e.jsx(U,{source:"src",title:"title"})})]})})]})}const qe=r=>e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Edit Store"})}),e.jsx(K,{...r,children:e.jsxs(A,{children:[e.jsx(u,{source:"foursquareId"}),e.jsx(u,{source:"name"}),e.jsx(u,{source:"address"}),e.jsx(u,{source:"region"}),e.jsx(u,{source:"postCode"}),e.jsx(u,{source:"timezone"}),e.jsx(u,{source:"latitude"}),e.jsx(u,{source:"longitude"}),e.jsx(u,{source:"storeCheckInPoints"}),e.jsx(u,{source:"storeReceiptPoints"}),e.jsx(D,{label:"inStorePartner",source:"inStorePartner"}),e.jsx(U,{source:"storePhoto",title:"title"}),e.jsx(ue,{source:"storePhoto",label:"Store Photo",required:!1,children:e.jsx(U,{source:"src",title:"title"})})]})})]});function _e(r){return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Products"})}),e.jsx(H,{...r,children:e.jsxs(q,{children:[e.jsx(x,{source:"title"}),e.jsx(x,{source:"description"}),e.jsx(x,{source:"productReceiptPoints"}),e.jsx(f,{label:"Category",render:t=>t.category?t.category.name:""}),e.jsx(f,{label:"Store",render:t=>t.store?t.store.name:""}),e.jsx(W,{basePath:"/product"}),e.jsx(V,{basePath:"/product"})]})})]})}const Be=({dataProvider:r,...t})=>{const[s,n]=$.useState([]),[o,a]=$.useState([]);return $.useEffect(()=>{const c=async()=>{try{const d=await r.getList("category",{pagination:{page:1,perPage:100},sort:{field:"name",order:"ASC"}});n(d.data)}catch(d){console.error("Error fetching categories:",d)}},i=async()=>{try{const d=await r.getList("store",{pagination:{page:1,perPage:100},sort:{field:"name",order:"ASC"}});a(d.data)}catch(d){console.error("Error fetching stores:",d)}};c(),i()},[]),e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Create Product"})}),e.jsx(G,{title:"create a post",...t,children:e.jsxs(A,{children:[e.jsx(u,{source:"title"}),e.jsx(u,{source:"description"}),e.jsx(u,{source:"productReceiptPoints"}),e.jsx(z,{source:"category",choices:s.map(c=>({id:c.id,name:c.name}))}),e.jsx(z,{source:"store",choices:o.map(c=>({id:c.id,name:c.name}))})]})})]})},ze=({dataProvider:r,...t})=>{const[s,n]=$.useState([]),[o,a]=$.useState([]);return $.useEffect(()=>{const c=async()=>{try{const d=await r.getList("category",{pagination:{page:1,perPage:100},sort:{field:"name",order:"ASC"}});n(d.data)}catch(d){console.error("Error fetching categories:",d)}},i=async()=>{try{const d=await r.getList("store",{pagination:{page:1,perPage:100},sort:{field:"name",order:"ASC"}});a(d.data)}catch(d){console.error("Error fetching stores:",d)}};c(),i()},[]),e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Edit Product"})}),e.jsx(K,{...t,children:e.jsxs(A,{children:[e.jsx(u,{source:"title"}),e.jsx(u,{source:"description"}),e.jsx(u,{source:"productReceiptPoints"}),e.jsx(z,{source:"category.id",choices:s.map(c=>({id:c.id,name:c.name}))}),e.jsx(z,{source:"store.id",choices:o.map(c=>({id:c.id,name:c.name}))})]})})]})};function We(r){return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Categories"})}),e.jsx(H,{...r,children:e.jsxs(q,{children:[e.jsx(x,{source:"name"}),e.jsx(W,{basePath:"/category"}),e.jsx(V,{basePath:"/category"})]})})]})}function Ve(r){return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Create Category"})}),e.jsx(G,{title:"create a post",...r,children:e.jsx(A,{children:e.jsx(u,{source:"name"})})})]})}const Ge=r=>e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Edit Category"})}),e.jsx(K,{...r,children:e.jsx(A,{children:e.jsx(u,{source:"name"})})})]}),Ke=({open:r,onClose:t,imageSrc:s})=>e.jsxs(pe,{open:r,onClose:t,children:[e.jsx(xe,{children:"Image Preview"}),e.jsx(je,{children:e.jsx("img",{src:s,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%"}})})]}),Qe=r=>{const[t,s]=$.useState(!1),[n,o]=$.useState(""),a=le(),c=l=>{o(l.storePhoto),s(!0)},i=()=>{s(!1)},d=l=>{a(`/product?storeId=${l.id}`)};return e.jsxs(e.Fragment,{children:[e.jsx(he,{...r,children:e.jsxs(ge,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"Store Detail"})}),e.jsxs(g,{container:!0,spacing:2,children:[e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"Name"}),e.jsx(x,{source:"name"})]}),e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"Region"}),e.jsx(x,{source:"region"})]}),e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"PostCode"}),e.jsx(x,{source:"postCode"})]}),e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"Timezone"}),e.jsx(x,{source:"timezone"})]}),e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"Address"}),e.jsx(x,{source:"address"})]}),e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"StoreCheckInPoints"}),e.jsx(x,{source:"storeCheckInPoints"})]}),e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"StoreReceiptPoints"}),e.jsx(x,{source:"storeReceiptPoints"})]}),e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"Products"}),e.jsx(f,{label:"View Products",render:l=>e.jsx("button",{style:{cursor:"pointer",color:"#333"},onClick:()=>d(l),children:"View Products"})})]}),e.jsxs(g,{item:!0,xs:6,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194"},children:"Store Photo"}),e.jsx(f,{label:"image",render:l=>e.jsx(U,{source:"storePhoto",title:"Store Photo",sx:{cursor:"pointer","& img":{maxWidth:110,maxHeight:40,objectFit:"contain"}},onClick:()=>c(l)})})]})]})]})}),e.jsx(Ke,{open:t,onClose:i,imageSrc:n})]})},Xe=({open:r,onClose:t,imageSrc:s})=>e.jsxs(pe,{open:r,onClose:t,children:[e.jsx(xe,{children:"Image Preview"}),e.jsx(je,{children:e.jsx("img",{src:s,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%"}})})]}),Ye=r=>{switch(r){case"approved":return"green";case"rejected":return"red";default:return"inherit"}};function Ze(r){const[t,s]=$.useState(!1),[n,o]=$.useState(""),a=i=>{o(i.image),s(!0)},c=()=>{s(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(p,{variant:"h5",sx:{padding:"10px 0px"},children:"OCR-Scan"})}),e.jsx(H,{...r,sort:{field:"approvedBy",order:"DESC"},children:e.jsxs(q,{children:[e.jsx(f,{label:"image",render:i=>e.jsx(U,{source:"image",title:"image",sx:{cursor:"pointer","& img":{maxWidth:50,maxHeight:50,objectFit:"contain"}},onClick:()=>a(i)})}),e.jsx(f,{label:"user",render:i=>{var d;return i!=null&&i.user?(d=i==null?void 0:i.user)==null?void 0:d.firstName:""}}),e.jsx(f,{label:"Store",render:i=>{var d;return i!=null&&i.store?(d=i==null?void 0:i.store)==null?void 0:d.name:""}}),e.jsx(f,{label:"Status",render:i=>e.jsx("span",{style:{color:Ye(i.status)},children:i.status})}),e.jsx(Ne,{source:"createdAt",label:"Created At",showTime:!1}),e.jsx(f,{label:"Approved By",render:i=>{var d;return i!=null&&i.approvedBy?(d=i==null?void 0:i.approvedBy)==null?void 0:d.firstName:""}}),e.jsx(de,{basePath:"/ocr_scan"})]})}),e.jsx(Xe,{open:t,onClose:c,imageSrc:n})]})}const et=r=>{const t=Oe(),s=ve(),n=le(),o=async(i,d)=>{const{id:l}=i||{},j={status:"approved",id:l};try{const{data:h}=await t.update(d,{id:l,data:j});console.log("Updated data:",h),s("Points awarded to the user successfully!","info"),setTimeout(()=>{n("/ocr_scan")},1e3)}catch(h){console.error("Error updating data:",h),s("Error approving record","warning")}},a=async(i,d)=>{const{id:l}=i||{},j={status:"rejected",id:l};try{const{data:h}=await t.update(d,{id:l,data:j});console.log("Updated data:",h),s("Record Rejected successfully","info"),setTimeout(()=>{n("/ocr_scan")},1e3)}catch(h){console.error("Error updating data:",h),s("Error rejecting record","warning")}},c=i=>{switch(i){case"approved":return"green";case"rejected":return"red";default:return"inherit"}};return e.jsx(he,{...r,children:e.jsxs(ge,{children:[e.jsx(g,{children:e.jsxs(p,{variant:"h5",sx:{padding:"10px 0px"},children:["OCR_Scan Detail",e.jsx(f,{label:"Status",render:i=>e.jsx("span",{style:{fontWeight:"bold",fontSize:"14px",textTransform:"uppercase",letterSpacing:"0.9px",padding:"10px",color:c(i.status)},children:i.status})})]})}),e.jsxs(g,{container:!0,spacing:2,children:[e.jsxs(g,{item:!0,xs:3,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194",fontWeight:"bold"},children:"Store Products"}),e.jsx(f,{label:"Products",render:i=>{var l;const d=((l=i.store)==null?void 0:l.products)||[];return e.jsx(te,{dense:!0,sx:{padding:"0px"},children:d.map(j=>e.jsx(re,{sx:{padding:"0px"},children:e.jsx(se,{primary:j.title})},j.id))})}})]}),e.jsxs(g,{item:!0,xs:3,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194",fontWeight:"bold"},children:"OCR Products"}),e.jsx(f,{label:"Products",render:i=>{const d=i.products||[];return e.jsx(te,{dense:!0,sx:{padding:"0px"},children:d.map(l=>e.jsx(re,{sx:{padding:"0px"},children:e.jsx(se,{primary:l.title})},l.id))})}})]}),e.jsxs(g,{item:!0,xs:3,children:[e.jsx(p,{variant:"subtitle1",sx:{color:"#9fd194",fontWeight:"bold"},children:"Points Reward"}),e.jsx(f,{label:"Products",render:i=>{const d=i.products||[];return e.jsx(te,{dense:!0,sx:{padding:"0px"},children:d.map(l=>e.jsx(re,{sx:{padding:"0px"},children:e.jsx(se,{primary:l.productReceiptPoints})},l.id))})}})]}),e.jsx(g,{item:!0,xs:3,children:e.jsx(f,{label:"Products",render:i=>i&&(i.status==="approved"||i.status==="rejected")?null:e.jsxs(e.Fragment,{children:[e.jsx(ie,{sx:{margin:"5px",backgroundColor:"green",color:"white",border:"none","&:hover":{backgroundColor:"darkgreen",border:"none"}},onClick:()=>o(i,"ocr_scan"),children:"Approve"}),e.jsx(ie,{sx:{margin:"5px",backgroundColor:"#be2626",border:"none",width:"90px",color:"white","&:hover":{backgroundColor:"#a61e1e",border:"none"}},onClick:()=>a(i,"ocr_scan"),children:"Reject"})]})})})]})]})})},tt=()=>e.jsx(Ce,{children:e.jsxs(we,{dataProvider:ne,authProvider:Ae,theme:Je,darkTheme:Ee,children:[e.jsx(F,{name:"user",list:Me,create:ke,edit:Fe}),e.jsx(F,{name:"store",list:Ue,create:He,edit:qe,show:Qe}),e.jsx(F,{name:"product",list:_e,create:r=>e.jsx(Be,{...r,dataProvider:ne}),edit:r=>e.jsx(ze,{...r,dataProvider:ne})}),e.jsx(F,{name:"category",list:We,create:Ve,edit:Ge}),e.jsx(F,{name:"ocr_scan",list:Ze,show:et})]})}),ae=document.getElementById("root");ae?Ie.createRoot(ae).render(e.jsx(Te.StrictMode,{children:e.jsx(tt,{})})):console.error("Root element with id 'root' not found in the document.");
